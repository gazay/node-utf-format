// U+1D400 - U+1D433
const BOLD = {
  a: 'ğš', b: 'ğ›', c: 'ğœ', d: 'ğ', e: 'ğ', f: 'ğŸ', g: 'ğ ', h: 'ğ¡', i: 'ğ¢', j: 'ğ£',
  k: 'ğ¤', l: 'ğ¥', m: 'ğ¦', n: 'ğ§', o: 'ğ¨', p: 'ğ©', q: 'ğª', r: 'ğ«', s: 'ğ¬', t: 'ğ­',
  u: 'ğ®', v: 'ğ¯', w: 'ğ°', x: 'ğ±', y: 'ğ²', z: 'ğ³',
  A: 'ğ€', B: 'ğ', C: 'ğ‚', D: 'ğƒ', E: 'ğ„', F: 'ğ…', G: 'ğ†', H: 'ğ‡', I: 'ğˆ', J: 'ğ‰',
  K: 'ğŠ', L: 'ğ‹', M: 'ğŒ', N: 'ğ', O: 'ğ', P: 'ğ', Q: 'ğ', R: 'ğ‘', S: 'ğ’', T: 'ğ“',
  U: 'ğ”', V: 'ğ•', W: 'ğ–', X: 'ğ—', Y: 'ğ˜', Z: 'ğ™',
  // U+1D7CE - U+1D7D7
  0: 'ğŸ', 1: 'ğŸ', 2: 'ğŸ', 3: 'ğŸ‘', 4: 'ğŸ’', 5: 'ğŸ“', 6: 'ğŸ”', 7: 'ğŸ•', 8: 'ğŸ–', 9: 'ğŸ—',
};

// U+1D434 - U+1D467
const ITALIC = {
  a: 'ğ‘', b: 'ğ‘', c: 'ğ‘', d: 'ğ‘‘', e: 'ğ‘’', f: 'ğ‘“', g: 'ğ‘”', h: 'ğ’‰', i: 'ğ‘–', j: 'ğ‘—',
  k: 'ğ‘˜', l: 'ğ‘™', m: 'ğ‘š', n: 'ğ‘›', o: 'ğ‘œ', p: 'ğ‘', q: 'ğ‘', r: 'ğ‘Ÿ', s: 'ğ‘ ', t: 'ğ‘¡',
  u: 'ğ‘¢', v: 'ğ‘£', w: 'ğ‘¤', x: 'ğ‘¥', y: 'ğ‘¦', z: 'ğ‘§',
  A: 'ğ´', B: 'ğµ', C: 'ğ¶', D: 'ğ·', E: 'ğ¸', F: 'ğ¹', G: 'ğº', H: 'ğ»', I: 'ğ¼', J: 'ğ½',
  K: 'ğ¾', L: 'ğ¿', M: 'ğ‘€', N: 'ğ‘', O: 'ğ‘‚', P: 'ğ‘ƒ', Q: 'ğ‘„', R: 'ğ‘…', S: 'ğ‘†', T: 'ğ‘‡',
  U: 'ğ‘ˆ', V: 'ğ‘‰', W: 'ğ‘Š', X: 'ğ‘‹', Y: 'ğ‘Œ', Z: 'ğ‘',
  // Normal numbers
  0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 6: '6', 7: '7', 8: '8', 9: '9',
};

// U+1D468 - U+1D49B
const BOLD_ITALIC = {
  a: 'ğ’‚', b: 'ğ’ƒ', c: 'ğ’„', d: 'ğ’…', e: 'ğ’†', f: 'ğ’‡', g: 'ğ’ˆ', h: 'ğ’‰', i: 'ğ’Š', j: 'ğ’‹',
  k: 'ğ’Œ', l: 'ğ’', m: 'ğ’', n: 'ğ’', o: 'ğ’', p: 'ğ’‘', q: 'ğ’’', r: 'ğ’“', s: 'ğ’”', t: 'ğ’•',
  u: 'ğ’–', v: 'ğ’—', w: 'ğ’˜', x: 'ğ’™', y: 'ğ’š', z: 'ğ’›',
  A: 'ğ‘¨', B: 'ğ‘©', C: 'ğ‘ª', D: 'ğ‘«', E: 'ğ‘¬', F: 'ğ‘­', G: 'ğ‘®', H: 'ğ‘¯', I: 'ğ‘°', J: 'ğ‘±',
  K: 'ğ‘²', L: 'ğ‘³', M: 'ğ‘´', N: 'ğ‘µ', O: 'ğ‘¶', P: 'ğ‘·', Q: 'ğ‘¸', R: 'ğ‘¹', S: 'ğ‘º', T: 'ğ‘»',
  U: 'ğ‘¼', V: 'ğ‘½', W: 'ğ‘¾', X: 'ğ‘¿', Y: 'ğ’€', Z: 'ğ’',
  // U+1D7CE - U+1D7D7
  0: 'ğŸ', 1: 'ğŸ', 2: 'ğŸ', 3: 'ğŸ‘', 4: 'ğŸ’', 5: 'ğŸ“', 6: 'ğŸ”', 7: 'ğŸ•', 8: 'ğŸ–', 9: 'ğŸ—',
};

// U+1D4D0 - U+1D503
const BOLD_SCRIPT = {
  a: 'ğ“ª', b: 'ğ“«', c: 'ğ“¬', d: 'ğ“­', e: 'ğ“®', f: 'ğ“¯', g: 'ğ“°', h: 'ğ“±', i: 'ğ“²', j: 'ğ“³',
  k: 'ğ“´', l: 'ğ“µ', m: 'ğ“¶', n: 'ğ“·', o: 'ğ“¸', p: 'ğ“¹', q: 'ğ“º', r: 'ğ“»', s: 'ğ“¼', t: 'ğ“½',
  u: 'ğ“¾', v: 'ğ“¿', w: 'ğ”€', x: 'ğ”', y: 'ğ”‚', z: 'ğ”ƒ',
  A: 'ğ“', B: 'ğ“‘', C: 'ğ“’', D: 'ğ““', E: 'ğ“”', F: 'ğ“•', G: 'ğ“–', H: 'ğ“—', I: 'ğ“˜', J: 'ğ“™',
  K: 'ğ“š', L: 'ğ“›', M: 'ğ“œ', N: 'ğ“', O: 'ğ“', P: 'ğ“Ÿ', Q: 'ğ“ ', R: 'ğ“¡', S: 'ğ“¢', T: 'ğ“£',
  U: 'ğ“¤', V: 'ğ“¥', W: 'ğ“¦', X: 'ğ“§', Y: 'ğ“¨', Z: 'ğ“©',
  // U+1D7CE - U+1D7D7
  0: 'ğŸ', 1: 'ğŸ', 2: 'ğŸ', 3: 'ğŸ‘', 4: 'ğŸ’', 5: 'ğŸ“', 6: 'ğŸ”', 7: 'ğŸ•', 8: 'ğŸ–', 9: 'ğŸ—',
};

// U+1D5A0 - U+1D5D3
const SS_REGULAR = {
  A: 'ğ– ', B: 'ğ–¡', C: 'ğ–¢', D: 'ğ–£', E: 'ğ–¤', F: 'ğ–¥', G: 'ğ–¦', H: 'ğ–§', I: 'ğ–¨', J: 'ğ–©',
  K: 'ğ–ª', L: 'ğ–«', M: 'ğ–¬', N: 'ğ–­', O: 'ğ–®', P: 'ğ–¯', Q: 'ğ–°', R: 'ğ–±', S: 'ğ–²', T: 'ğ–³',
  U: 'ğ–´', V: 'ğ–µ', W: 'ğ–¶', X: 'ğ–·', Y: 'ğ–¸', Z: 'ğ–¹',
  a: 'ğ–º', b: 'ğ–»', c: 'ğ–¼', d: 'ğ–½', e: 'ğ–¾', f: 'ğ–¿', g: 'ğ—€', h: 'ğ—', i: 'ğ—‚', j: 'ğ—ƒ',
  k: 'ğ—„', l: 'ğ—…', m: 'ğ—†', n: 'ğ—‡', o: 'ğ—ˆ', p: 'ğ—‰', q: 'ğ—Š', r: 'ğ—‹', s: 'ğ—Œ', t: 'ğ—',
  u: 'ğ—', v: 'ğ—', w: 'ğ—', x: 'ğ—‘', y: 'ğ—’', z: 'ğ—“',
  // U+1D7E2 - U+1D7EB
  0: 'ğŸ¢', 1: 'ğŸ£', 2: 'ğŸ¤', 3: 'ğŸ¥', 4: 'ğŸ¦', 5: 'ğŸ§', 6: 'ğŸ¨', 7: 'ğŸ©', 8: 'ğŸª', 9: 'ğŸ«',
};

// U+1D5D4 - U+1D607
const SS_BOLD = {
  A: 'ğ—”', B: 'ğ—•', C: 'ğ—–', D: 'ğ——', E: 'ğ—˜', F: 'ğ—™', G: 'ğ—š', H: 'ğ—›', I: 'ğ—œ', J: 'ğ—',
  K: 'ğ—', L: 'ğ—Ÿ', M: 'ğ— ', N: 'ğ—¡', O: 'ğ—¢', P: 'ğ—£', Q: 'ğ—¤', R: 'ğ—¥', S: 'ğ—¦', T: 'ğ—§',
  U: 'ğ—¨', V: 'ğ—©', W: 'ğ—ª', X: 'ğ—«', Y: 'ğ—¬', Z: 'ğ—­',
  a: 'ğ—®', b: 'ğ—¯', c: 'ğ—°', d: 'ğ—±', e: 'ğ—²', f: 'ğ—³', g: 'ğ—´', h: 'ğ—µ', i: 'ğ—¶', j: 'ğ—·',
  k: 'ğ—¸', l: 'ğ—¹', m: 'ğ—º', n: 'ğ—»', o: 'ğ—¼', p: 'ğ—½', q: 'ğ—¾', r: 'ğ—¿', s: 'ğ˜€', t: 'ğ˜',
  u: 'ğ˜‚', v: 'ğ˜ƒ', w: 'ğ˜„', x: 'ğ˜…', y: 'ğ˜†', z: 'ğ˜‡',
  // U+1D7EC - U+1D7F5
  0: 'ğŸ¬', 1: 'ğŸ­', 2: 'ğŸ®', 3: 'ğŸ¯', 4: 'ğŸ°', 5: 'ğŸ±', 6: 'ğŸ²', 7: 'ğŸ³', 8: 'ğŸ´', 9: 'ğŸµ',
};

// U+1D608 - U+1D63B
const SS_ITALIC = {
  A: 'ğ˜ˆ', B: 'ğ˜‰', C: 'ğ˜Š', D: 'ğ˜‹', E: 'ğ˜Œ', F: 'ğ˜', G: 'ğ˜', H: 'ğ˜', I: 'ğ˜', J: 'ğ˜‘',
  K: 'ğ˜’', L: 'ğ˜“', M: 'ğ˜”', N: 'ğ˜•', O: 'ğ˜–', P: 'ğ˜—', Q: 'ğ˜˜', R: 'ğ˜™', S: 'ğ˜š', T: 'ğ˜›',
  U: 'ğ˜œ', V: 'ğ˜', W: 'ğ˜', X: 'ğ˜Ÿ', Y: 'ğ˜ ', Z: 'ğ˜¡',
  a: 'ğ˜¢', b: 'ğ˜£', c: 'ğ˜¤', d: 'ğ˜¥', e: 'ğ˜¦', f: 'ğ˜§', g: 'ğ˜¨', h: 'ğ˜©', i: 'ğ˜ª', j: 'ğ˜«',
  k: 'ğ˜¬', l: 'ğ˜­', m: 'ğ˜®', n: 'ğ˜¯', o: 'ğ˜°', p: 'ğ˜±', q: 'ğ˜²', r: 'ğ˜³', s: 'ğ˜´', t: 'ğ˜µ',
  u: 'ğ˜¶', v: 'ğ˜·', w: 'ğ˜¸', x: 'ğ˜¹', y: 'ğ˜º', z: 'ğ˜»',
  // U+1D7E2 - U+1D7EB
  0: 'ğŸ¢', 1: 'ğŸ£', 2: 'ğŸ¤', 3: 'ğŸ¥', 4: 'ğŸ¦', 5: 'ğŸ§', 6: 'ğŸ¨', 7: 'ğŸ©', 8: 'ğŸª', 9: 'ğŸ«',
};

// U+1D63C - U+1D66F
const SS_BOLD_ITALIC = {
  A: 'ğ˜¼', B: 'ğ˜½', C: 'ğ˜¾', D: 'ğ˜¿', E: 'ğ™€', F: 'ğ™', G: 'ğ™‚', H: 'ğ™ƒ', I: 'ğ™„', J: 'ğ™…',
  K: 'ğ™†', L: 'ğ™‡', M: 'ğ™ˆ', N: 'ğ™‰', O: 'ğ™Š', P: 'ğ™‹', Q: 'ğ™Œ', R: 'ğ™', S: 'ğ™', T: 'ğ™',
  U: 'ğ™', V: 'ğ™‘', W: 'ğ™’', X: 'ğ™“', Y: 'ğ™”', Z: 'ğ™•',
  a: 'ğ™–', b: 'ğ™—', c: 'ğ™˜', d: 'ğ™™', e: 'ğ™š', f: 'ğ™›', g: 'ğ™œ', h: 'ğ™', i: 'ğ™', j: 'ğ™Ÿ',
  k: 'ğ™ ', l: 'ğ™¡', m: 'ğ™¢', n: 'ğ™£', o: 'ğ™¤', p: 'ğ™¥', q: 'ğ™¦', r: 'ğ™§', s: 'ğ™¨', t: 'ğ™©',
  u: 'ğ™ª', v: 'ğ™«', w: 'ğ™¬', x: 'ğ™­', y: 'ğ™®', z: 'ğ™¯',
  // U+1D7EC - U+1D7F5
  0: 'ğŸ¬', 1: 'ğŸ­', 2: 'ğŸ®', 3: 'ğŸ¯', 4: 'ğŸ°', 5: 'ğŸ±', 6: 'ğŸ²', 7: 'ğŸ³', 8: 'ğŸ´', 9: 'ğŸµ',
};

// U+1D670 - U+1D6A3
const MONOSPACE = {
  A: 'ğ™°', B: 'ğ™±', C: 'ğ™²', D: 'ğ™³', E: 'ğ™´', F: 'ğ™µ', G: 'ğ™¶', H: 'ğ™·', I: 'ğ™¸', J: 'ğ™¹',
  K: 'ğ™º', L: 'ğ™»', M: 'ğ™¼', N: 'ğ™½', O: 'ğ™¾', P: 'ğ™¿', Q: 'ğš€', R: 'ğš', S: 'ğš‚', T: 'ğšƒ',
  U: 'ğš„', V: 'ğš…', W: 'ğš†', X: 'ğš‡', Y: 'ğšˆ', Z: 'ğš‰',
  a: 'ğšŠ', b: 'ğš‹', c: 'ğšŒ', d: 'ğš', e: 'ğš', f: 'ğš', g: 'ğš', h: 'ğš‘', i: 'ğš’', j: 'ğš“',
  k: 'ğš”', l: 'ğš•', m: 'ğš–', n: 'ğš—', o: 'ğš˜', p: 'ğš™', q: 'ğšš', r: 'ğš›', s: 'ğšœ', t: 'ğš',
  u: 'ğš', v: 'ğšŸ', w: 'ğš ', x: 'ğš¡', y: 'ğš¢', z: 'ğš£',
  // U+1D7F6 - U+1D7FF
  0: 'ğŸ¶', 1: 'ğŸ·', 2: 'ğŸ¸', 3: 'ğŸ¹', 4: 'ğŸº', 5: 'ğŸ»', 6: 'ğŸ¼', 7: 'ğŸ½', 8: 'ğŸ¾', 9: 'ğŸ¿',
};

const FULL_WIDTH = {
  A: 'ï¼¡', B: 'ï¼¢', C: 'ï¼£', D: 'ï¼¤', E: 'ï¼¥', F: 'ï¼¦', G: 'ï¼§', H: 'ï¼¨', I: 'ï¼©',
  J: 'ï¼ª', K: 'ï¼«', L: 'ï¼¬', M: 'ï¼­', N: 'ï¼®', O: 'ï¼¯', P: 'ï¼°', Q: 'ï¼±', R: 'ï¼²',
  S: 'ï¼³', T: 'ï¼´', U: 'ï¼µ', V: 'ï¼¶', W: 'ï¼·', X: 'ï¼¸', Y: 'ï¼¹', Z: 'ï¼º',
  a: 'ï½', b: 'ï½‚', c: 'ï½ƒ', d: 'ï½„', e: 'ï½…', f: 'ï½†', g: 'ï½‡', h: 'ï½ˆ', i: 'ï½‰',
  j: 'ï½Š', k: 'ï½‹', l: 'ï½Œ', m: 'ï½', n: 'ï½', o: 'ï½', p: 'ï½', q: 'ï½‘', r: 'ï½’',
  s: 'ï½“', t: 'ï½”', u: 'ï½•', v: 'ï½–', w: 'ï½—', x: 'ï½˜', y: 'ï½™', z: 'ï½š',
  0: 'ï¼', 1: 'ï¼‘', 2: 'ï¼’', 3: 'ï¼“', 4: 'ï¼”', 5: 'ï¼•', 6: 'ï¼–', 7: 'ï¼—', 8: 'ï¼˜',
  9: 'ï¼™',
  '!': 'ï¼', '"': 'ï¼‚', '#': 'ï¼ƒ', '$': 'ï¼„', '%': 'ï¼…', '&': 'ï¼†', '\'': 'ï¼‡',
  '(': 'ï¼ˆ', ')': 'ï¼‰', '*': 'ï¼Š', '+': 'ï¼‹', ',': 'ï¼Œ', '-': 'ï¼', '.': 'ï¼',
  '/': 'ï¼', ':': 'ï¼š', ';': 'ï¼›', '<': 'ï¼œ', '=': 'ï¼', '>': 'ï¼', '?': 'ï¼Ÿ',
  '@': 'ï¼ ', '[': 'ï¼»', '\\': 'ï¼¼', ']': 'ï¼½', '^': 'ï¼¾', '_': 'ï¼¿', '`': 'ï½€',
  '{': 'ï½›', '|': 'ï½œ', '}': 'ï½', '~': 'ï½', ' ': '  ',
};

const COMBINING_LOWLINE = {
  A: 'AÌ²', B: 'BÌ²', C: 'CÌ²', D: 'DÌ²', E: 'EÌ²', F: 'FÌ²', G: 'GÌ²', H: 'HÌ²', I: 'IÌ²', J: 'JÌ²',
  K: 'KÌ²', L: 'LÌ²', M: 'MÌ²', N: 'N', O: 'OÌ²', P: 'PÌ²', Q: 'Q', R: 'RÌ²', S: 'SÌ²', T: 'TÌ²',
  U: 'UÌ²', V: 'VÌ²', W: 'WÌ²', X: 'XÌ²', Y: 'YÌ²', Z: 'ZÌ²',
  a: 'aÌ²', b: 'bÌ²', c: 'cÌ²', d: 'dÌ²', e: 'eÌ²', f: 'fÌ²', g: 'g', h: 'hÌ²', i: 'iÌ²', j: 'j',
  k: 'kÌ²', l: 'lÌ²', m: 'mÌ²', n: 'nÌ²', o: 'oÌ²', p: 'p', q: 'q', r: 'rÌ²', s: 'sÌ²', t: 'tÌ²',
  u: 'uÌ²', v: 'vÌ²', w: 'wÌ²', x: 'xÌ²', y: 'y', z: 'zÌ²',
  0: '0Ì²', 1: '1Ì²', 2: '2', 3: '3Ì²', 4: '4Ì²', 5: '5Ì²', 6: '6Ì²', 7: '7Ì²', 8: '8Ì²', 9: '9Ì²',
  '#': '#Ì²', '$': '$Ì²', '%': '%Ì²', '&': '&Ì²', '/': '/Ì²', ':': ':Ì²', '<': '<Ì²',
  '>': '>Ì²', '?': '?Ì²', '@': '@Ì²', '\\': '\\Ì²', '_': '_Ì²', '|': '|Ì²',
};

const COMBINING_UNDERDOT = {
  A: 'Aâƒ¨', B: 'Bâƒ¨', C: 'Câƒ¨', D: 'Dâƒ¨', E: 'Eâƒ¨', F: 'Fâƒ¨', G: 'Gâƒ¨', H: 'Hâƒ¨', I: 'Iâƒ¨', J: 'Jâƒ¨',
  K: 'Kâƒ¨', L: 'Lâƒ¨', M: 'Mâƒ¨', N: 'Nâƒ¨', O: 'Oâƒ¨', P: 'Pâƒ¨', Q: 'Q', R: 'Râƒ¨', S: 'Sâƒ¨', T: 'Tâƒ¨',
  U: 'Uâƒ¨', V: 'Vâƒ¨', W: 'Wâƒ¨', X: 'Xâƒ¨', Y: 'Yâƒ¨', Z: 'Zâƒ¨',
  a: 'aâƒ¨', b: 'bâƒ¨', c: 'câƒ¨', d: 'dâƒ¨', e: 'eâƒ¨', f: 'fâƒ¨', g: 'gâƒ¨', h: 'hâƒ¨', i: 'iâƒ¨', j: 'jâƒ¨',
  k: 'kâƒ¨', l: 'lâƒ¨', m: 'mâƒ¨', n: 'nâƒ¨', o: 'oâƒ¨', p: 'pâƒ¨', q: 'qâƒ¨', r: 'râƒ¨', s: 'sâƒ¨', t: 'tâƒ¨',
  u: 'uâƒ¨', v: 'vâƒ¨', w: 'wâƒ¨', x: 'xâƒ¨', y: 'yâƒ¨', z: 'zâƒ¨',
  0: '0âƒ¨', 1: '1âƒ¨', 2: '2âƒ¨', 3: '3âƒ¨', 4: '4âƒ¨', 5: '5âƒ¨', 6: '6âƒ¨', 7: '7âƒ¨', 8: '8âƒ¨', 9: '9âƒ¨',
  '!': '!âƒ¨', '#': '#âƒ¨', '$': '$âƒ¨', '%': '%âƒ¨', '&': '&âƒ¨', '(': '(âƒ¨', ')': ')âƒ¨', '.': '.âƒ¨',
  '/': '/âƒ¨', ':': ':âƒ¨', ';': ';âƒ¨', '?': '?âƒ¨', '@': '@âƒ¨', '[': '[âƒ¨', '\\': '\\âƒ¨', ']': ']âƒ¨',
  '_': '_âƒ¨', '{': '{âƒ¨', '|': '|âƒ¨', '}': '}âƒ¨', ' ': ' âƒ¨'
};

const COMBINING_OVERLINE = {
  A: 'AÌ…', B: 'BÌ…', C: 'CÌ…', D: 'DÌ…', E: 'EÌ…', F: 'FÌ…', G: 'GÌ…', H: 'HÌ…', I: 'IÌ…', J: 'JÌ…',
  K: 'KÌ…', L: 'LÌ…', M: 'MÌ…', N: 'NÌ…', O: 'OÌ…', P: 'PÌ…', Q: 'QÌ…', R: 'RÌ…', S: 'SÌ…', T: 'TÌ…',
  U: 'UÌ…', V: 'VÌ…', W: 'WÌ…', X: 'XÌ…', Y: 'YÌ…', Z: 'ZÌ…',
  a: 'aÌ…', b: 'b', c: 'cÌ…', d: 'd', e: 'eÌ…', f: 'f', g: 'gÌ…', h: 'h', i: 'i', j: 'j',
  k: 'k', l: 'l', m: 'mÌ…', n: 'nÌ…', o: 'oÌ…', p: 'pÌ…', q: 'qÌ…', r: 'rÌ…', s: 'sÌ…', t: 't',
  u: 'uÌ…', v: 'vÌ…', w: 'wÌ…', x: 'xÌ…', y: 'yÌ…', z: 'zÌ…',
  0: '0Ì…', 1: '1Ì…', 2: '2Ì…', 3: '3Ì…', 4: '4Ì…', 5: '5Ì…', 6: '6Ì…', 7: '7Ì…', 8: '8Ì…', 9: '9Ì…',
  '!': '!Ì…', '#': '#Ì…', '$': '$Ì…', '%': '%Ì…', '&': '&Ì…', '(': '(Ì…', ')': ')Ì…', '/': '/Ì…',
  '?': '?Ì…', '@': '@Ì…', '[': '[Ì…', '\\': '\\Ì…', ']': ']Ì…', '{': '{Ì…', '|': '|Ì…',
  '}': '}Ì…',
};

const COMBINING_OVERLOWLINE = {
  A: 'AÌ…Ì²', B: 'BÌ…Ì²', C: 'CÌ…Ì²', D: 'DÌ…Ì²', E: 'EÌ…Ì²', F: 'FÌ…Ì²', G: 'GÌ…Ì²', H: 'HÌ…Ì²', I: 'IÌ…Ì²', J: 'JÌ…Ì²',
  K: 'KÌ…Ì²', L: 'LÌ…Ì²', M: 'MÌ…Ì²', N: 'NÌ…Ì²', O: 'OÌ…Ì²', P: 'PÌ…Ì²', Q: 'QÌ…Ì²', R: 'RÌ…Ì²', S: 'SÌ…Ì²', T: 'TÌ…Ì²',
  U: 'UÌ…Ì²', V: 'VÌ…Ì²', W: 'WÌ…Ì²', X: 'XÌ…Ì²', Y: 'YÌ…Ì²', Z: 'ZÌ…Ì²',
  a: 'aÌ…Ì²', b: 'bÌ²', c: 'cÌ…Ì²', d: 'dÌ²', e: 'eÌ…Ì²', f: 'fÌ²', g: 'gÌ…', h: 'hÌ²', i: 'iÌ²', j: 'j',
  k: 'kÌ²', l: 'lÌ²', m: 'mÌ…Ì²', n: 'nÌ…Ì²', o: 'oÌ…Ì²', p: 'pÌ…', q: 'qÌ…', r: 'rÌ…Ì²', s: 'sÌ…Ì²', t: 'tÌ²',
  u: 'uÌ…Ì²', v: 'vÌ…Ì²', w: 'wÌ…Ì²', x: 'xÌ…Ì²', y: 'yÌ…', z: 'zÌ…Ì²',
  0: '0Ì…Ì²', 1: '1Ì…Ì²', 2: '2Ì…Ì²', 3: '3Ì…Ì²', 4: '4Ì…Ì²', 5: '5Ì…Ì²', 6: '6Ì…Ì²', 7: '7Ì…Ì²', 8: '8Ì…Ì²', 9: '9Ì…Ì²',
  '!': '!Ì…Ì²', '#': '#Ì…Ì²', '$': '$Ì…Ì²', '%': '%Ì…Ì²', '&': '&Ì…Ì²', '/': '/Ì…Ì²', '?': '?Ì…Ì²', '@': '@Ì…Ì²',
  '\\': '\\Ì…Ì²', '|': '|Ì…Ì²',
}

const AVAILABLE_TYPES = {
  b: BOLD,
  i: ITALIC,
  bi: BOLD_ITALIC,
  m: MONOSPACE,
  ss: SS_REGULAR,
  ssb: SS_BOLD,
  ssi: SS_ITALIC,
  ssbi: SS_BOLD_ITALIC,
  bs: BOLD_SCRIPT,
  fw: FULL_WIDTH,
  cl: COMBINING_LOWLINE,
  co: COMBINING_OVERLINE,
  cu: COMBINING_UNDERDOT,
  col: COMBINING_OVERLOWLINE,
};

function formatAll(text, formatter) {
  return text.split('').map(ch => (formatter[ch] || ch)).join('');
}

function formatPart(part, type, symbolRegex, font) {
  const result = [];
  if (font === 'ss' && type !== 'm') {
    result.push(formatAll(part, AVAILABLE_TYPES.ss));
    result.push(formatAll(part.replace(symbolRegex, ''), AVAILABLE_TYPES[`ss${type}`]));
  } else {
    result.push(part);
    result.push(formatAll(part.replace(symbolRegex, ''), AVAILABLE_TYPES[type]));
  }
  return result;
}

function markdownParser(text, font) {
  let result = text;
  let bold = text.match(/(\*[^\*]+\*)/g);
  if (bold) {
    bold = bold.map(b => formatPart(b, 'b', /\*/g, font));
  }
  let mono = text.match(/(`[^`]+`)|(```[^`]+```)/g);
  if (mono) {
    mono = mono.map(m => formatPart(m, 'm', /`/g, font));
  }
  let italic = text.match(/(_[^_]+_)/g);
  if (italic) {
    italic = italic.map(i => formatPart(i, 'i', /_/g, font));
  }
  if (font === 'ss') {
    result = formatAll(result, AVAILABLE_TYPES.ss);
  }
  if (bold) {
    bold.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  if (mono) {
    mono.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  if (italic) {
    italic.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  return result;
}

function markdownCompatibleParser(text, font) {
  let result = text;
  let bold = text.match(/(\*[^\*]+\*)/g);
  if (bold) {
    bold = bold.map(b => formatPart(b, 'cl', /\*/g));
  }
  let mono = text.match(/(`[^`]+`)|(```[^`]+```)/g);
  if (mono) {
    mono = mono.map(m => formatPart(m, 'fw', /`/g));
  }
  let italic = text.match(/(_[^_]+_)/g);
  if (italic) {
    italic = italic.map(i => formatPart(i, 'cu', /_/g));
  }
  if (bold) {
    bold.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  if (mono) {
    mono.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  if (italic) {
    italic.forEach(repl => {
      result = result.replace(repl[0], repl[1]);
    });
  }
  return result;
}

const AVAILABLE_PARSERS = {
  md: markdownParser,
  mdc: markdownCompatibleParser,
};

function format(text, opts = {}) {
  const formatter = AVAILABLE_TYPES[opts.to];
  const parser = AVAILABLE_PARSERS[opts.parser];
  if (formatter) {
    return formatAll(text, formatter);
  } else if (parser) {
    return parser(text, opts.font);
  }
  return markdownCompatibleParser(text, opts.font);
}

module.exports = {
  format: format,
};
